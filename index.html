<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<link rel="stylesheet" type="text/css" href="index.css">
		<title>Фрактал</title>
	</head>
	<body>
		<center>
			<canvas id="fractal" height="700px" width="1200px"></canvas>
		</center>
		<script>
			/*const rps = prompt("Введите требуемое количество повторений: ");
			const st = prompt("Введите размер точек (нечётное число): ");*/
		</script>
		<script>
			const rps = prompt("Введите требуемое количество повторений: ");
			const st = prompt("Введите размер точек (нечётное число): ");

			function Triangle () {


			var canv = document.getElementById("fractal");
			var ctx = canv.getContext("2d");

			ctx.clearRect(0, 0, canv.width, canv.height);

			function getRandomInt (min, max) {
  				return Math.floor(Math.random() * (max - min + 1)) + min;
			}

			/*const rps = prompt("Введите требуемое количество повторений: ");
			const st = prompt("Введите размер точек (нечётное число): ");

			var rps = 40000;
			var st = 1;*/

			const Ax = getRandomInt(700, 1000);
			const Ay = getRandomInt(20, 100);

			const Bx = getRandomInt(50, 650);
			const By = getRandomInt(650, 660);

			const Cx = getRandomInt(900, 1100);
			const Cy = getRandomInt(650, 660);

			/*const Ax = getRandomInt(1, 1199);
			const Ay = getRandomInt(1, 699);

			const Bx = getRandomInt(1, 1199);
			const By = getRandomInt(1, 699);

			const Cx = getRandomInt(1, 1199);
			const Cy = getRandomInt(1, 699);*/


			ctx.moveTo(Ax, Ay);
			ctx.fillRect(Ax-4, Ay-4, 9, 9);

			ctx.moveTo(Bx, By);
			ctx.fillRect(Bx-4, By-4, 9, 9);

			ctx.moveTo(Cx, Cy);
			ctx.fillRect(Cx-4, Cy-4, 9, 9);

			var x = getRandomInt(1, 1599);
			var y = getRandomInt(1, 899);

			ctx.moveTo(x, y);
			ctx.fillRect(x-((st-1)/2), y-((st-1)/2), st, st);

			var a;

			function Move(){
				a = getRandomInt(1, 3);
				switch (a) {
					case 1:
						x = (Ax+x)/2;
						y = (Ay+y)/2;
						break;
					case 2:
						x = (Bx+x)/2;
						y = (By+y)/2;
						break;
					case 3:
						x = (Cx+x)/2;
						y = (Cy+y)/2;
				}

				ctx.moveTo(x, y);
				ctx.fillRect(x-((st-1)/2), y-((st-1)/2), st, st);
			}

			for ( i=1; i<=rps; i++){
				setTimeout(Move, 0.00005);
			}


			}

			Triangle();
		</script>
		<center>
			<a id="button" onclick="Triangle()">New triangle</a>
		</center>
	</body>
</html>